{"version":3,"sources":["webpack:///src/components/shoppingCart/orderPayment.vue","webpack:///./src/components/shoppingCart/orderPayment.vue?f1e1","webpack:///./src/components/shoppingCart/orderPayment.vue","webpack:///./src/assets/images/anniu@2x.png","webpack:///./src/assets/images/tishi@2x.png"],"names":["orderPayment","headers","getTime","expiresTime","webview","orderId","href","pay","readTitle","viewStr","this","type","payType","payModel","code","itemStagingNum","data","urlStr","then","response","obj","jsApiCall","message","mweb_url","submit","body","realPay","createTime","orderNo","appid","Date","fenzhong","RemainingTime","shenyufenzhogn","count","timeStr","timer","timeBig","shoppingCart_orderPayment","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","headerType","headerStr","_e","_v","style","isShowTitle","_s","domProps","textContent","$route","query","orderTime","orderPrice","toFixed","on","click","$event","stopPropagation","switchType","class","directives","name","rawName","value","orderObj","stagingDto","isUseStaging","expression","huabeiStr","terminallyPay","position","model","callback","$$v","tcShow","lookMone","_l","staging","index","clickThisLI","isStaging","poundageCost","innerHTML","str","toOtherView","src","__webpack_require__","alt","guanbi","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","p"],"mappings":"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","file":"static/js/4.6c41faf69280ced5e15b.js","sourcesContent":["<template>  \n  <div class=\"orderPayment\">  \n    <headers v-if=\"isShowTitle\" :headerType='2' :headerStr=\"'晶杰收银台'\"></headers>\n    <p class=\"prompt\" :style=\"isShowTitle?'margin-top:.45rem':''\">订单已经提交！请在<i>{{timeStr}}</i>内完成<em v-text=\"$route.query.RemainingTime?'尾款':''\"></em>支付。</p>\n    <div class=\"order\">\n      <p><span>订单编号</span>{{orderNo}}</p>\n      <p><span>下单时间</span>{{orderTime}}</p>\n      <p><span>待付金额</span>¥{{(orderPrice/100).toFixed(2)}}</p>\n    </div>\n    <div class=\"orderType\">\n      <p>请选择支付方式</p>\n      <p @click.stop=\"switchType(3)\"><i></i>支付宝<b :class=\"payType==3?'active':''\"></b></p> \n      <p @click.stop=\"switchType(2)\"><i></i>微信支付<b :class=\"payType==2?'active':''\"></b></p> \n      <p @click.stop=\"switchType(5)\" v-show=\"orderObj.stagingDto.isUseStaging!=1\"><i></i><em v-if=\"huabeiStr.terminallyPay\" v-text=\"huabeiStr.terminallyPay+'x'+huabeiStr.itemStagingNum+'期'\"></em><b :class=\"payType==5?'active':''\"></b></p>\n    </div>\n    <div class=\"footer_botton\" @click.stop=\"pay()\">\n      <span>立即付款</span>\n    </div>\n    <!-- 花呗弹窗 -->\n    <mt-popup v-model=\"tcShow\" class=\"tanchuang\" position=\"bottom\">\n      <div class=\"tcTongyi huabei\">\n          <p class=\"title\">花呗分期<i @click.stop=\"lookMone\"></i></p>\n          <ul>\n            <li v-if=\"orderObj.stagingDto.isUseStaging !=1\" v-for=\"(staging,index) in orderObj.stagingDto.stagingItemList\" @click.stop=\"clickThisLI($event,staging,index)\">\n              <span>{{staging.terminallyPay}}x{{staging.itemStagingNum}}期</span>\n              <span v-text=\"staging.isStaging ==0?'免息，无服务费':'含利息'+staging.poundageCost+'/期'\"></span>\n            </li>\n          </ul>\n          <button @click.stop=\"lookMone();return false;\">确定</button>\n      </div>\n    </mt-popup>\n\n    <div v-html=\"str\"></div>\n\n    <div class=\"mask\" v-if=\"!toOtherView\"></div>\n    <div class=\"tishi\" v-if=\"!toOtherView\">\n      <img class=\"tishi_one\" src=\"../../assets/images/tishi@2x.png\" alt=\"\">\n      <img class=\"tishi_two\" src=\"../../assets/images/anniu@2x.png\" alt=\"\" @click.stop=\"guanbi\">\n    </div>\n\n  </div>  \n</template>  \n  \n<script> \nimport headers from '../headers.vue'\nimport {Toast,MessageBox} from 'mint-ui' \nimport Cookies from 'js-cookie';\nimport util from '@/libs/util' \nimport axios from 'axios' \nexport default {  \n  name: 'orderPayment',  \n  data() {  \n    return {  \n       timeStr:null,\n       orderId:null,//订单id\n       orderNo:null,//订单编号\n       orderTime:null,//下单时间\n       orderPrice:null,//实付金额\n       orderObj:{\n        stagingDto:{\n          isUseStaging:1,\n        },\n       },\n       huabeiStr:{},//选择花呗之后显示的提示语（花呗几期）\n       tcShow:false,//弹窗是否显示\n       payType:3,//当前选择的支付方式\n       str:'',\n       appid:null,//微信应用id，微信浏览器支付使用\n       code:null,//微信支付\n       toOtherView:true,//\n       webType:null,//\n       shenyufenzhogn:null,//剩余几分钟\n       shenyufenzhogn2:null,//剩余几分钟2\n       count: '',//计时数字\n       timer: null,//计时器\n       isShowTitle:false,//页面标题是否显示\n       jsonObj:null,\n    };  \n  },\n  components:{\n    headers:headers,\n  },\n  created(){\n    util.setTitle('晶杰收银台');\n    let millisecond = new Date().getTime(); \n    let expiresTime = new Date(millisecond + 60 * 1000 * 60 * 24 * 15);\n    Cookies.set('VUE2SESSID', decodeURIComponent(this.$route.query.VUE2SESSID), {expires: expiresTime} );\n    this.webType = util.webview();\n    this.orderId = this.$route.query.orderId;\n    let urlStr = window.location.href;\n    if(urlStr.indexOf('code')>=0){\n      this.code = urlStr.split('?')[1].split('&')[0].split('=')[1];\n      this.payType = 2;\n      this.pay();\n    }else{\n      this.ajaxPayinfo(this.orderId);\n    }\n    this.readTitle();\n  },\n  methods:{\n    readTitle(){\n      let viewStr = util.webview();\n      console.log(viewStr);\n      if(viewStr == 'other'){\n        this.isShowTitle = true;\n      }else{\n        this.isShowTitle = false;\n      }\n    },\n    guanbi(){\n      this.toOtherView =true;\n    },\n    switchType(type){//切换支付方式\n      let that =this;\n      if(type == 5){\n        if(that.orderObj.stagingDto.isUseStaging == 1){\n          Toast('该笔订单不支持花呗分期支付!');\n        }else{\n          that.payType = type;\n          that.tcShow=true;\n        }\n      }else{\n        that.payType = type;\n      }\n    },\n    pay(){//支付\n      let that =this,payModel=0;\n      if(!that.payType){\n        Toast('请选择支付方式！');\n        return;\n      }else{\n        payModel = that.payType;\n      }\n      if(that.webType == 'weixin' && payModel != 2){//在微信里面支付宝\n        that.toOtherView =false;\n        return;\n      }else if(that.webType == 'zhifupay' && payModel == 2){//在支付宝里面微信支付\n        that.toOtherView =false;\n        return;\n      }\n      let data = {\n        \"orderId\": that.orderId,//(描述：订单id、类型：Long、是否必填：Y)\n        \"payModel\": payModel,//(描述：支付方式 2 微信 3 支付宝 5 花呗分期、类型：Integer、是否必填：Y)\n        \"code\":that.code,\n      };\n      if(that.huabeiStr.itemStagingNum){\n        data.fqNum = that.huabeiStr.itemStagingNum;\n      }\n      let urlStr = util.getpost(data);\n      if(payModel == 2){//微信支付\n        that.weixin(data,urlStr)\n      }else{//支付宝支付\n        that.zhifubao(data,urlStr);\n      }\n    },\n    weixin(data,urlStr){\n      let that =this;\n      let webType = util.webview();\n      if(webType == 'weixin'){\n        if(!that.code){//没有code\n          let urlStr='http://m.jingjie100.com/#/orderPayment?orderId='+that.orderId+'&VUE2SESSID='+encodeURIComponent(Cookies.get('VUE2SESSID'));\n          window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid='+that.appid+'&redirect_uri='+encodeURIComponent(urlStr)+'&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect';\n        }else{//有code\n          let that =this;\n          axios({\n            method:\"post\",\n            url:\"/order/mwebPay\"+urlStr,\n            dataType: 'json', \n            data:data,\n          }).then(response => {\n            if(response.data.status == 0){\n              let obj = JSON.parse(\"{\"+response.data.body.payInfo+\"}\");\n              that.jsonObj = obj;\n              if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {//苹果手机上微信中微信支付\n                WeixinJSBridge.invoke('getBrandWCPayRequest', obj, function(res) {\n                  if (res.err_msg == 'get_brand_wcpay_request:ok') {//支付成功或失败前台判断\n                    that.$router.push({name:'paymentResults',query:{orderId:data.orderId,payModel:2,fqNum:'',fqSellerPercent:''}});\n                  }else{\n                    that.$router.go(-1);\n                  }\n                });\n              } else if (/(Android)/i.test(navigator.userAgent)) {\n                if(typeof WeixinJSBridge == \"undefined\"){\n                  if(document.addEventListener){\n                    document.addEventListener('WeixinJSBridgeReady', that.jsApiCall, false);\n                  }else if (document.attachEvent){\n                    document.attachEvent('WeixinJSBridgeReady', that.jsApiCall);\n                    document.attachEvent('onWeixinJSBridgeReady', that.jsApiCall);\n                  }                     \n                }else{\n                  that.jsApiCall();\n                }\n              } else {\n                alert('请在手机上打开网址！');\n              };\n            }else{\n              if(response.data.status == 499){\n                that.$router.push({name:'signInPage',query:{outLogin:'/'}});\n              }else{\n                MessageBox('系统提示',response.data.message);\n              }\n            }\n          }).catch(oData => {\n            MessageBox('系统提示',oData.data.message);\n          })\n        }\n      }else{//非微信浏览器\n        axios({\n          method:\"post\",\n          url:\"/order/mwebPay\"+urlStr,\n          dataType: 'json', \n          data:data,\n        }).then(response => {\n          if(response.data.status == 0){\n            if(webType == 'zhifupay'){//在支付宝浏览器\n              \n            }else{//非微信浏览器，可直接跳转支付宝支付\n              window.location.href =response.data.body.mweb_url;\n            }\n          }else{\n            if(response.data.status == 499){\n              that.$router.push({name:'signInPage',query:{outLogin:'/'}});\n            }else{\n              MessageBox('系统提示',response.data.message);\n            }\n          }\n        }).catch(oData => {\n          MessageBox('系统提示',oData.data.message);\n        })\n      }\n    },\n    jsApiCall(){\n      WeixinJSBridge.invoke('getBrandWCPayRequest', this.jsonObj, function(res) {\n        if (res.err_msg == 'get_brand_wcpay_request:ok') {//支付成功或失败前台判断\n          that.$router.push({name:'paymentResults',query:{orderId:data.orderId,payModel:2,fqNum:'',fqSellerPercent:''}});\n        }else{\n          window.history.go(-1);\n        }\n      });\n    },\n    zhifubao(data,urlStr){\n      let that =this;\n      axios({\n        method:\"post\",\n        url:\"/order/mwebPay\"+urlStr,\n        dataType: 'json', \n        data:data,\n      }).then(response => {\n        if(response.data.status == 0){\n          let webType = util.webview();\n          if(webType == 'weixin'){//在微信浏览器中点击支付宝支付（指示使用别的浏览器）\n            \n          }else{//非微信浏览器，可直接跳转支付宝支付\n            if(that.payType == 5){//花呗\n              that.str = response.data.body.url.split('<script>')[0];\n            }else{\n              that.str = response.data.body.form.split('<script>')[0];\n            }\n            setTimeout(function(){\n              document.forms[0].submit();\n            },500);\n          }\n        }else{\n          if(response.data.status == 499){\n            that.$router.push({name:'signInPage',query:{outLogin:'/'}});\n          }else{\n            MessageBox('系统提示',response.data.message);\n          }\n        }\n      }).catch(oData => {\n        // MessageBox('系统提示',oData.data.message);\n      })\n    },\n\n    clickThisLI(e,obj,index){//花呗切换事件\n      let that =this;\n      if(e.srcElement.className.indexOf('activeli')>=0){}else{\n        var cls = document.getElementsByClassName('activeli');\n        if(cls[0]){\n          cls[0].className = '';\n          that.huabeiStr={};\n        }\n        e.currentTarget.className = 'activeli';\n        that.huabeiStr=obj;\n      }\n    },\n    ajaxPayinfo(){//请求订单的基本信息\n      let that =this;\n      let data = {\"orderId\":that.orderId};\n      let urlStr = util.getpost(data);\n      axios({\n        method:\"post\",\n        url:\"/order/payInfo\"+urlStr,\n        dataType: 'json', \n        data:data,\n      }).then(response => {\n        if(response.data.status == 0){\n          that.orderObj = response.data.body;\n          that.orderPrice = response.data.body.realPay;\n          that.orderTime = response.data.body.createTime;\n          that.orderNo = response.data.body.orderNo;\n          that.appid = response.data.body.appid;\n          let timeArr = that.orderTime.split(' ')[1].split(':');\n          let nowTime = new Date();\n          let fenzhong = ((nowTime.getHours()-timeArr[0])*60)+(nowTime.getMinutes()-timeArr[1]);\n          that.shenyufenzhogn = 120-fenzhong;\n          if(that.$route.query.RemainingTime){//尾款支付\n            that.TailMoneytimerFunc(that.$route.query.RemainingTime);\n          }else{\n            that.timerFunc(that.shenyufenzhogn);\n          }\n        }else{\n          if(response.data.status == 499){\n            that.isShowData=false;\n            that.$router.push({name:'signInPage',query:{outLogin:'/'}});\n          }else{\n            that.isShowData=false;\n            MessageBox('系统提示',response.data.message);\n          }\n        }\n      }).catch(oData => {\n        that.isShowData=false;\n        MessageBox('系统提示',oData.data.message);\n      })\n    },\n    timerFunc(timeBig){//普通订单支付\n      let vm =this;\n      vm.count = timeBig*60;\n      vm.timer = setInterval(() => {\n        if (vm.count > 0 && vm.count <= timeBig*60) {\n          vm.count --;\n          let yu = vm.count%60;\n          let fen = (vm.count-yu)/60;\n          if(fen>60){\n            vm.timeStr = '1小时'+(fen-60)+'分钟'+yu+'秒';\n          }else{\n            vm.timeStr = fen+'分钟'+yu+'秒';\n          }\n          vm.$store.commit('addPlaceOrderSurplusTime',vm.timeStr);\n        } else {\n          clearInterval(vm.timer);\n          vm.timer = null;\n        }\n      }, 1000)\n    },\n    TailMoneytimerFunc(timeBig){//尾款订单支付\n      let vm =this;\n      vm.count = timeBig;\n      vm.timer = setInterval(() => {\n        if (vm.count > 0 && vm.count <= timeBig) {\n          vm.count --;\n          if(vm.count<60){//秒\n              vm.timeStr = '0天0时0分钟'+vm.count+'秒';\n          }else if(vm.count>=60 && vm.count<3600){//分\n              vm.timeStr = '0天0时'+(vm.count-vm.count%60)/60+'分种'+vm.count%60+'秒';\n          }else if(vm.count>=3600 && vm.count<86400){//时\n              vm.timeStr = '0天'+(vm.count-vm.count%3600)/3600+'时'+(vm.count%3600-(vm.count%3600)%60)/60+'分钟'+(vm.count%3600)%60+'秒';\n          }else if(vm.count>=86400){//天\n              vm.timeStr = (vm.count-vm.count%86400)/86400+'天'+(vm.count%86400-(vm.count%86400)%3600)/3600+'时'+(((vm.count%86400)%3600)-((vm.count%86400)%3600)%60)/60+'分钟'+((vm.count%86400)%3600)%60+'秒';\n          }\n          vm.$store.commit('addPlaceOrderSurplusTime',vm.timeStr);\n        } else {\n          clearInterval(vm.timer);\n          vm.timer = null;\n        }\n      }, 1000)\n    },\n    lookMone(){//关闭弹窗\n      if(!this.huabeiStr.terminallyPay){\n        Toast('请选择分期数！');\n        return;\n      }\n      this.tcShow=false;\n    },\n  },\n\n  updated(){\n    if(document.forms[0]){\n      document.forms[0].submit();\n    }\n  },\n  deactivated(){\n    console.log(1897);\n  },\n};  \n</script>  \n  \n<style lang=\"less\" scoped>   \n  @import '../../assets/less/orderPayment.less';\n  .mask{\n    width: 100%;\n    height: 100%;\n    background: #000;\n    opacity: 0.5;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 100000;\n  }\n  .tishi{\n    width: 100%;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 100001;\n    .tishi_one{\n      width: 95%;\n    }\n    .tishi_two{\n      width: 1rem;\n      height: .34rem;\n    }\n  }\n</style> \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/shoppingCart/orderPayment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"orderPayment\"},[(_vm.isShowTitle)?_c('headers',{attrs:{\"headerType\":2,\"headerStr\":'晶杰收银台'}}):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"prompt\",style:(_vm.isShowTitle?'margin-top:.45rem':'')},[_vm._v(\"订单已经提交！请在\"),_c('i',[_vm._v(_vm._s(_vm.timeStr))]),_vm._v(\"内完成\"),_c('em',{domProps:{\"textContent\":_vm._s(_vm.$route.query.RemainingTime?'尾款':'')}}),_vm._v(\"支付。\")]),_vm._v(\" \"),_c('div',{staticClass:\"order\"},[_c('p',[_c('span',[_vm._v(\"订单编号\")]),_vm._v(_vm._s(_vm.orderNo))]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"下单时间\")]),_vm._v(_vm._s(_vm.orderTime))]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"待付金额\")]),_vm._v(\"¥\"+_vm._s((_vm.orderPrice/100).toFixed(2)))])]),_vm._v(\" \"),_c('div',{staticClass:\"orderType\"},[_c('p',[_vm._v(\"请选择支付方式\")]),_vm._v(\" \"),_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm.switchType(3)}}},[_c('i'),_vm._v(\"支付宝\"),_c('b',{class:_vm.payType==3?'active':''})]),_vm._v(\" \"),_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm.switchType(2)}}},[_c('i'),_vm._v(\"微信支付\"),_c('b',{class:_vm.payType==2?'active':''})]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderObj.stagingDto.isUseStaging!=1),expression:\"orderObj.stagingDto.isUseStaging!=1\"}],on:{\"click\":function($event){$event.stopPropagation();_vm.switchType(5)}}},[_c('i'),(_vm.huabeiStr.terminallyPay)?_c('em',{domProps:{\"textContent\":_vm._s(_vm.huabeiStr.terminallyPay+'x'+_vm.huabeiStr.itemStagingNum+'期')}}):_vm._e(),_c('b',{class:_vm.payType==5?'active':''})])]),_vm._v(\" \"),_c('div',{staticClass:\"footer_botton\",on:{\"click\":function($event){$event.stopPropagation();_vm.pay()}}},[_c('span',[_vm._v(\"立即付款\")])]),_vm._v(\" \"),_c('mt-popup',{staticClass:\"tanchuang\",attrs:{\"position\":\"bottom\"},model:{value:(_vm.tcShow),callback:function ($$v) {_vm.tcShow=$$v},expression:\"tcShow\"}},[_c('div',{staticClass:\"tcTongyi huabei\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"花呗分期\"),_c('i',{on:{\"click\":function($event){$event.stopPropagation();_vm.lookMone($event)}}})]),_vm._v(\" \"),_c('ul',_vm._l((_vm.orderObj.stagingDto.stagingItemList),function(staging,index){return (_vm.orderObj.stagingDto.isUseStaging !=1)?_c('li',{on:{\"click\":function($event){$event.stopPropagation();_vm.clickThisLI($event,staging,index)}}},[_c('span',[_vm._v(_vm._s(staging.terminallyPay)+\"x\"+_vm._s(staging.itemStagingNum)+\"期\")]),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(staging.isStaging ==0?'免息，无服务费':'含利息'+staging.poundageCost+'/期')}})]):_vm._e()})),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();_vm.lookMone();return false;}}},[_vm._v(\"确定\")])])]),_vm._v(\" \"),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.str)}}),_vm._v(\" \"),(!_vm.toOtherView)?_c('div',{staticClass:\"mask\"}):_vm._e(),_vm._v(\" \"),(!_vm.toOtherView)?_c('div',{staticClass:\"tishi\"},[_c('img',{staticClass:\"tishi_one\",attrs:{\"src\":require(\"../../assets/images/tishi@2x.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('img',{staticClass:\"tishi_two\",attrs:{\"src\":require(\"../../assets/images/anniu@2x.png\"),\"alt\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.guanbi($event)}}})]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-203e9575\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/shoppingCart/orderPayment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-203e9575\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./orderPayment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderPayment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderPayment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-203e9575\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./orderPayment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-203e9575\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/shoppingCart/orderPayment.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABECAYAAADEKno9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyRjA4NEI2NDQ2QUExMUU4QTNCOENDNzFEREI5QzExMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyRjA4NEI2NTQ2QUExMUU4QTNCOENDNzFEREI5QzExMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJGMDg0QjYyNDZBQTExRThBM0I4Q0M3MUREQjlDMTExIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJGMDg0QjYzNDZBQTExRThBM0I4Q0M3MUREQjlDMTExIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MuMRBQAACaxJREFUeNrsnVtoFFcY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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/anniu@2x.png\n// module id = c5dl\n// module chunks = 4","module.exports = __webpack_public_path__ + \"static/img/tishi@2x.3937791.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/tishi@2x.png\n// module id = mTye\n// module chunks = 4"],"sourceRoot":""}