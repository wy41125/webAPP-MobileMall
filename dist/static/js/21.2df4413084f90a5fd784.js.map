{"version":3,"sources":["webpack:///src/components/My/store/BMap.vue","webpack:///./src/components/My/store/BMap.vue?9ec8","webpack:///./src/components/My/store/BMap.vue"],"names":["str","heightStr","address","distance","lat","lng","orgName","phoneNo","userlat","userlng","ready","webview","this","point","marker","Geocoder","userAddRess","My_store_BMap","render","_vm","_h","$createElement","_c","_self","staticClass","style","$store","state","attrs","headerType","headerStr","_e","_v","titleShow","id","_s","href","on","click","$event","stopPropagation","daohang","staticRenderFns","Component","__webpack_require__","normalizeComponent","store_BMap","ssrContext","__webpack_exports__"],"mappings":"0JA6BA,aACA,eACA,YACA,OACA,OACA,WACA,WACA,WACA,WAGA,mCAIA,yDAGA,qBACAA,mBACAC,iFAGAC,yCACAC,oCACAC,+BACAC,sDACAC,+CACAC,uCACAC,uCACAC,aACAC,qBACA,qBACAC,8CAEA,uCAEA,iDAMA,2BADAC,wCAEAR,uBACA,0BACAS,gBACAC,GALAF,+BAoBAJ,sCAGAI,eACAG,0EAGAb,6HAKAc,wDAYA,oLACA,wECjHAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAP,KAAaQ,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,OAAAC,MAAAN,EAAA,YAAyCA,EAAAO,OAAAC,MAAA,UAAAL,EAAA,WAA6CM,OAAOC,WAAA,EAAAC,UAAA,UAAmCX,EAAAY,KAAAZ,EAAAa,GAAA,KAAAV,EAAA,OAAiCG,MAAAN,EAAAO,OAAAC,MAAAM,UAAA,sBAAAL,OAAgEM,GAAA,YAAef,EAAAa,GAAA,KAAAV,EAAA,OAAwBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,OAAAA,EAAA,KAAAA,EAAA,QAAAH,EAAAa,GAAAb,EAAAgB,GAAAhB,EAAAb,YAAAa,EAAAa,GAAA,KAAAb,EAAAgB,GAAAhB,EAAAhB,SAAA,IAAAgB,EAAAhB,SAAA,SAAAgB,EAAAhB,SAAA,QAAAgB,EAAAa,GAAA,KAAAV,EAAA,KAAAH,EAAAa,GAAAb,EAAAgB,GAAAhB,EAAAjB,cAAAiB,EAAAa,GAAA,KAAAV,EAAA,OAAAA,EAAA,KAAAH,EAAAa,GAAA,KAAAV,EAAA,KAAwPM,OAAOQ,KAAA,OAAAjB,EAAAZ,WAA2BY,EAAAa,GAAA,cAAAb,EAAAa,GAAA,KAAAV,EAAA,OAA6CE,YAAA,UAAAa,IAA0BC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBrB,EAAAsB,QAAAF,OAAsBjB,EAAA,KAAUE,YAAA,SAAmBL,EAAAa,GAAA,qBAE91BU,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACA7B,GATA,EAVA,SAAA8B,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/21.2df4413084f90a5fd784.js","sourcesContent":["<template>\n  <div class=\"home\" :style=\"heightStr\">\n    <headers v-if=\"$store.state.titleShow\" :headerType='2' :headerStr=\"'查看门店'\"></headers>\n    <div :style=\"$store.state.titleShow?'margin-top:.4rem':''\" id=\"allmap\" ></div>\n    <div class=\"store\">\n      <div class=\"storediv\">\n        <div>\n          <p><span>{{orgName}}</span> 约{{distance>1000?(distance/1000+'KM'):(distance+'M')}}</p>\n          <p>{{address}}</p>\n        </div>  \n        <div>\n          <i></i>\n          <a :href=\"'tel:'+phoneNo\">拨打电话</a>\n        </div>  \n      </div>\n      <div class=\"daohang\" @click.stop=\"daohang\">\n        <i class=\"icon\" style=\"\"></i>导航\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport util from '@/libs/util'\nimport headers from '../../headers.vue'  \n  export default {\n    data () {\n      return {\n        heightStr:null,//屏幕可见高度\n        address:'',//门店地址\n        userAddRess:'',//用户地址\n        distance:'',//门店距离\n        lat:'',//纬度\n        lng:'',//经度\n        orgName:'',//门店名称\n        phoneNo:'',//门店联系电话\n        userlat:'',\n        userlng:'',\n\n      }\n    },\n    components:{\n      headers:headers,\n    },\n    created(){\n      // this.heightStr = 'height:'+(window.innerHeight-80)+'px;';\n      let str = 'height:'+window.innerHeight+'px;';\n      this.heightStr = str;\n      console.log(this.heightStr);\n    },\n    mounted () {\n      this.address = decodeURIComponent(this.$route.query.address);\n      this.distance = this.$route.query.distance;\n      this.lat = this.$route.query.lat;\n      this.lng = this.$route.query.lng;\n      this.orgName = decodeURIComponent(this.$route.query.orgName);\n      this.phoneNo = 'tel:'+this.$route.query.phoneNo;\n      this.userlat = this.$route.query.userlat;\n      this.userlng = this.$route.query.userlng;\n      this.ready();\n      util.setTitle('查看门店');\n      let viewStr = util.webview();\n      if(viewStr == 'other'){\n        this.$store.commit('titleShowFunc',true);\n      }else{\n        this.$store.commit('titleShowFunc',false);\n      }\n    },\n    methods: {\n      ready () {\n        let that = this;\n        let map = new BMap.Map(\"allmap\");\n        let point = new BMap.Point(that.$route.query.lng,that.$route.query.lat);\n        map.centerAndZoom(point, 15);\n        let marker = new BMap.Marker(point);  // 创建标注\n        map.addOverlay(marker);               // 将标注添加到地图中\n        that.userAdd(this.userlng, this.userlat);\n        // let geolocation = new BMap.Geolocation();\n        // geolocation.getCurrentPosition(function(r){\n        //   if(this.getStatus() == BMAP_STATUS_SUCCESS){\n        //     let mk = new BMap.Marker(r.point);\n        //     map.addOverlay(mk);\n        //     map.panTo(r.point);\n        //     that.userlat = r.point.lat;\n        //     that.userlng = r.point.lng;\n        //     that.userAdd(r.point.lng, r.point.lat);\n        //   }\n        //   else {\n        //     alert('failed'+this.getStatus());\n        //   }        \n        // });\n      },\n      userAdd(lng, lat){\n        let that =this;\n        let myGeo = new BMap.Geocoder();      \n        myGeo.getLocation(new BMap.Point(lng, lat), function(result){// 根据坐标得到地址描述          \n          if(result){ \n            that.userAddRess = result.address;\n          } \n        });\n      },\n      daohang(){\n        console.log(this.userlat+','+this.userlng+','+this.lat+','+this.lng+','+this.address+','+this.userAddRess);\n        let userCite = this.userAddRess.split('省')[1].split('市');\n        // console.log(\"http://api.map.baidu.com/direction/v2/transit?origin=40.056878,116.30815&destination=31.222965,121.505821&ak=您的ak\");\n        // window.location.href=\"https://map.baidu.com/mobile/webapp/walk/list/qt=walk&sn=1%24%24%24%24\"+this.userlat+\"%2C\"+this.userlng+\"%24%24我的位置%24%24&en=1%24%24%24%24\"+this.lat+\"%2C\"+this.lng+\"%24%24\"+this.address+\"%24%24&sc=179&ec=179&c=179&pn=0&rn=5&searchFlag=transit&version=3&wm=1/foo=bar&vt=map&traffic=off&evtson=off&calluniversalonce=1&universalLinkCbkTag=1\";\n        // let that = this;\n        // var map = new BMap.Map(\"allmap\");    \n        // map.centerAndZoom(new BMap.Point(that.$route.query.lng,that.$route.query.lat), 15);    \n        // var walk = new BMap.WalkingRoute(map, {    \n        //   renderOptions: {map: map}   \n        // });\n        // console.log(that.userAddRess);\n        // console.log(that.address);\n        // walk.search(that.userAddRess,that.address);\n        window.location.href = \"http://api.map.baidu.com/direction?origin=latlng:\"+this.userlat+\",\"+this.userlng+\"|name:我的位置&destination=\"+this.address+\"&mode=driving&origin_region=\"+userCite+\"&destination_region=杭州&output=html&src=yourCompanyName|yourAppName\";\n      },\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .home{\n    width: 100%;\n    height: 100%;\n    font-size: 0.13rem;\n    #allmap{\n      width: 100%;\n      height: 100%;\n    }\n    .store{\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      background-color:#fff; \n      z-index: 1000;\n      .storediv{\n        width: 100%;\n        height: 70%;\n        border-bottom: 1px solid #ececec;\n        div{\n          display: inline-block;\n          padding: 0.1rem 0.15rem;\n          text-align: left;\n          &:nth-child(1){\n            width: 62%;\n            color: #a1a1a1;\n            border-right: 1px solid #ececec;\n            span{\n              color: #333;\n              font-size: .15rem;\n            }\n          }\n          &:nth-child(2){\n            color: #8e9bc3;\n            a{\n              color: #8e9bc3;\n            }\n            i{\n              margin:0 auto;\n              display: block;\n              width: 0.15rem;\n              height: 0.15rem;\n              background: url('../../../assets/images/my/phone_blue@2x.png') no-repeat;\n              background-size: 0.15rem;\n            }\n          }\n        }\n      }\n      .daohang{\n        width: 100%;\n        height: .5rem;\n        line-height: .5rem;\n        text-align: center;\n        display: flex;\n        display: -webkit-flex;\n        flex-direction: column;\n        justify-content: center;\n        color: #CDA63F;\n        position: relative;\n        .icon{\n          display: inline-block;\n          width: 0.13rem;\n          height: 0.13rem;\n          background: url(../../../assets/images/shopCart/navigation@2x.png) no-repeat;\n          background-size: 0.13rem;\n          position: absolute;\n          top: 35%;\n          left: 43%;\n        }\n      }\n    }\n  }\n</style>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/My/store/BMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\",style:(_vm.heightStr)},[(_vm.$store.state.titleShow)?_c('headers',{attrs:{\"headerType\":2,\"headerStr\":'查看门店'}}):_vm._e(),_vm._v(\" \"),_c('div',{style:(_vm.$store.state.titleShow?'margin-top:.4rem':''),attrs:{\"id\":\"allmap\"}}),_vm._v(\" \"),_c('div',{staticClass:\"store\"},[_c('div',{staticClass:\"storediv\"},[_c('div',[_c('p',[_c('span',[_vm._v(_vm._s(_vm.orgName))]),_vm._v(\" 约\"+_vm._s(_vm.distance>1000?(_vm.distance/1000+'KM'):(_vm.distance+'M')))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.address))])]),_vm._v(\" \"),_c('div',[_c('i'),_vm._v(\" \"),_c('a',{attrs:{\"href\":'tel:'+_vm.phoneNo}},[_vm._v(\"拨打电话\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"daohang\",on:{\"click\":function($event){$event.stopPropagation();_vm.daohang($event)}}},[_c('i',{staticClass:\"icon\"}),_vm._v(\"导航\\n    \")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fba59478\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/My/store/BMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fba59478\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fba59478\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fba59478\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/My/store/BMap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}