webpackJsonp([27],{MWGH:function(t,e){},"eWA+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Au9i");var o=a("TVG1"),n=a("mtWM"),s=a.n(n),i=a("lbHh"),r=a.n(i),u={name:"signin",data:function(){return{val:{PhoneNum:"",Password:""},timeStr:"获取动态密码",show:!0,count:"",timer:null,phonetrue:!1,heightStr:null}},methods:{guanbiFunc:function(){this.$route.query.outLogin?this.$router.push({path:"/"}):this.$router.go(-1)},toRegister:function(){this.$route.query.outLogin?this.$router.replace({name:this.$route.query.nameTow,query:{name:this.$route.query.name,outLogin:"/"}}):this.$router.replace({name:this.$route.query.nameTow,query:{name:this.$route.query.name}})},watchPhone:function(t){var e=t.currentTarget.value;11==e.length&&"1"==e[0]?this.phonetrue=!0:this.phonetrue=!1},verificationCode:function(){var t=this;this.count=o.a.TIME_COUNT,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=o.a.TIME_COUNT?t.count--:(t.show=!0,clearInterval(t.timer),t.timeStr="再次发送",t.timer=null)},1e3)},ajaxVerificationCode:function(){var t=this,e=this;if(!e.timer)if(e.phonetrue){var a={};a.phoneNo=e.val.PhoneNum,a.type="1";var n=o.a.getpost(a);s()({method:"post",url:"/customer/open/getSmscode"+n,dataType:"json",data:a}).then(function(a){0==a.data.status?t.verificationCode():1==a.data.status?(o.a.viewPopup(a.data.message),e.$router.replace({name:"signInPage"})):o.a.viewPopup(a.data.message)}).catch(function(t){t.data.status&&0!=t.data.status&&o.a.viewPopup(t.data.message)})}else o.a.viewPopup("请输入正确的手机号！")},phoneLogin:function(t){var e=this;if(!(t.srcElement.className.indexOf("canNext")<0))if(e.phonetrue){var a={phoneNo:e.val.PhoneNum,verifyCode:e.val.Password},n=o.a.getpost(a);s()({method:"post",url:"/customer/open/validRegisterCode"+n,dataType:"json",data:a}).then(function(t){0==t.data.status?e.fastRegistration(e.val.PhoneNum,e.val.Password):(o.a.viewPopup(t.data.message),e.val.Password="")}).catch(function(t){t.data.status&&0!=t.data.status&&o.a.viewPopup(t.data.message)})}else o.a.viewPopup("请输入正确的手机号！")},fastRegistration:function(t,e){var a={phoneNo:t,verifyCode:e},n=o.a.getpost(a);s()({method:"post",url:"/customer/open/register"+n,dataType:"json",data:a}).then(function(t){if(0==t.data.status){var e=(new Date).getTime(),a=new Date(e+1296e6);that.$store.commit("addUserPhone",that.val.PhoneNum),r.a.set("jingjieUser",that.val.PhoneNum),r.a.set("VUE2SESSID",t.data.body.token,{expires:a}),that.$router.replace({path:"/"})}else o.a.viewPopup(t.data.message),that.val.Password=""}).catch(function(t){t.data.status&&0!=t.data.status&&o.a.viewPopup(t.data.message)})}},created:function(){o.a.setTitle("注册"),this.heightStr="height:"+(window.innerHeight-80)+"px;","other"==o.a.webview()?this.$store.commit("titleShowFunc",!0):this.$store.commit("titleShowFunc",!1)},beforeRouteUpdate:function(t,e,a){}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin",style:t.heightStr},[a("header",{staticClass:"mint-header is-fixed"},[a("div",{staticClass:"mint-header-button is-left"},[a("i",{staticStyle:{"margin-left":".05rem"},on:{click:t.guanbiFunc}})]),t._v(" "),a("h1",{staticClass:"mint-header-title"},[t.$store.state.titleShow?a("em",{staticStyle:{display:"inline-block","line-height":".45rem","font-size":".17rem"}},[t._v("注册")]):t._e()]),t._v(" "),a("div",{staticClass:"mint-header-button is-right"},[a("button",{staticClass:"mint-button mint-button--default mint-button--normal",staticStyle:{"margin-right":".05rem"}},[a("label",{staticClass:"mint-button-text",staticStyle:{"font-size":".14rem"},on:{click:function(e){e.stopPropagation(),t.toRegister(e)}}},[t._v("登录")])])])]),t._v(" "),a("div",{staticClass:"inputDiv"},[a("div",{staticClass:"tongyiDiv"},[a("p",{staticClass:"PhoneNum"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.PhoneNum,expression:"val.PhoneNum"}],attrs:{type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",placeholder:"手机号码"},domProps:{value:t.val.PhoneNum},on:{input:[function(e){e.target.composing||t.$set(t.val,"PhoneNum",e.target.value)},function(e){t.watchPhone(e)}]}}),t._v(" "),t.val.PhoneNum?a("i",{on:{click:function(e){t.val.PhoneNum=""}}}):t._e()]),t._v(" "),a("p",{staticClass:"Password"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.Password,expression:"val.Password"}],attrs:{type:"number",oninput:"if(value.length>6)value=value.slice(0,6)",placeholder:"验证码"},domProps:{value:t.val.Password},on:{input:function(e){e.target.composing||t.$set(t.val,"Password",e.target.value)}}}),t._v(" "),t.val.Password?a("i",{on:{click:function(e){t.val.Password=""}}}):t._e(),t._v(" "),a("span",{staticClass:"canClick",staticStyle:{"text-align":"center"},on:{click:t.ajaxVerificationCode}},[t.show?a("b",[t._v(t._s(t.timeStr))]):t._e(),t._v(" "),t.show?t._e():a("b",[t._v(t._s(t.count)+"s")])])]),t._v(" "),a("p",{staticClass:"buttonLogin noBorder"},[a("span",{class:""!=t.val.PhoneNum?"canNext":"",on:{click:function(e){e.stopPropagation(),t.phoneLogin(e)}}},[t._v("完成")])]),t._v(" "),a("p",{staticClass:" noBorder"},[t._v("注册即表示同意"),a("span",{staticClass:"colorbluo",on:{click:function(e){e.stopPropagation(),t.$router.push({name:"userProtocol"})}}},[t._v("《用户服务条款及服务协议》")])])])])])},staticRenderFns:[]};var c=a("VU/8")(u,l,!1,function(t){a("MWGH")},"data-v-6529b967",null);e.default=c.exports}});
//# sourceMappingURL=27.2b0872bb5ae0ad256108.js.map