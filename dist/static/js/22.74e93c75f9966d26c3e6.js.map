{"version":3,"sources":["webpack:///src/components/shoppingCart/order_card.vue","webpack:///./src/components/shoppingCart/order_card.vue?3e3c","webpack:///./src/components/shoppingCart/order_card.vue"],"names":["order_card","headers","obj","str","type","this","i","cardDate","data","urlStr","then","response","body","length","message","toTop","webview","shoppingCart_order_card","render","_vm","_h","$createElement","_c","_self","staticClass","$store","state","attrs","headerType","headerStr","_e","_v","style","titleShow","class","Tabbar","available","staticStyle","width","on","click","$event","stopPropagation","changeTabbar","_s","canNumber","noAvailable","nocannumber","_l","card","widthType","saveCardData","cardType","cardVal","name","domProps","textContent","minUsePrice","startTime","endTime","_m","isShow","src","__webpack_require__","alt","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.74e93c75f9966d26c3e6.js","sourcesContent":["<template>  \n  <div class=\"order_card\">  \n    <headers v-if=\"$store.state.titleShow\" :headerType='2' :headerStr=\"'使用优惠券'\"></headers>\n    <div class=\"title\" :style=\"$store.state.titleShow?'margin-top:.4rem':''\">\n      <ul>\n        <li style=\"width:49%;\" :class=\"Tabbar.available?'active':''\" @click.stop=\"changeTabbar(4)\">可用优惠券({{canNumber}})</li>\n        <li style=\"width:49%;\" :class=\"Tabbar.noAvailable?'active':''\" @click.stop=\"changeTabbar(5)\">不可用优惠券({{nocannumber}})</li>\n      </ul>\n    </div>\n\n    <div class=\"connet\"> \n      <div class=\"data\" v-if=\"isShow\">\n        <!-- 可用 -->\n        <div v-if=\"Tabbar.available\" class=\"available data_div\">\n          <div :class=\"widthType?widthType+' crad':' crad '\" v-for=\"card in cards\">\n            <i class=\"clickButton\" @click.stop=\"saveCardData(card,$event)\"></i>\n            <div class=\"data_data\">\n              <p class=\"data_data_one\">{{card.cardType == 1?'¥':''}}<span>{{card.cardVal/100}}</span>{{card.cardType == 2?'折':''}}</p>\n              <p class=\"data_data_two\">\n                <span>{{card.name}}</span>\n                <span v-text=\"(card.minUsePrice/100)>0?'满'+card.minUsePrice/100+'元可用':'无门槛使用'\"></span>\n              </p>\n            </div>\n            <div class=\"data_time\">\n              <span class=\"data_time_one\">有效期：{{card.startTime}}-{{card.endTime}}</span>\n            </div>\n          </div>\n        </div>\n        <!-- 不可用 -->\n        <div v-if=\"Tabbar.noAvailable\" class=\"noAvailable data_div\">\n          <div :class=\"widthType?widthType+' crad noAvailable':' crad noAvailable'\" v-for=\"card in nocards\">\n            <div class=\"data_data\">\n              <p class=\"data_data_one\">{{card.cardType == 1?'¥':''}}<span>{{card.cardVal/100}}</span>{{card.cardType == 2?'折':''}}</p>\n              <p class=\"data_data_two\"> \n                <span>{{card.name}}</span>\n                <span v-text=\"(card.minUsePrice/100)>0?'满'+card.minUsePrice/100+'元可用':'无门槛使用'\"></span>\n              </p>\n            </div>\n            <div class=\"data_time\">\n              <p class=\"data_time_oneP\"><span>有效期：{{card.startTime}}-{{card.endTime}}</span></p>\n              <p class=\"data_time_twoP\"><span>不可用原因：所结算商品中没有符合条件的商品</span></p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"nodata\" v-if=\"!isShow\">\n        <img src=\"../../assets/images/shopCart/card_empty@2x.png\" alt=\"\">\n        <br>\n        暂无优惠券\n      </div>\n    </div>\n  </div>  \n</template>  \n  \n<script>  \nimport {MessageBox} from 'mint-ui'\nimport headers from '../headers.vue'\nimport axios from 'axios'\nimport util from '@/libs/util' \nexport default {  \n  name: 'order_card',  \n  data() {  \n    return {  \n      Tabbar:{\n        available:false,\n        noAvailable:false,\n      },\n      canNumber:0,\n      nocannumber:0,\n      isShow:false,\n      cardDate:[],//请求可用不可用卡券入参数据\n      widthType:'',\n      cards:[],\n      nocards:[]\n    };  \n  },\n  components:{\n    headers:headers,\n  },\n  methods:{\n    saveCardData(obj,e){\n      let that =this,str='';\n      str = JSON.stringify(obj);\n      if(event.srcElement.className.indexOf('onclick')>=0){\n        window.sessionStorage.setItem('cardStr','');\n        event.currentTarget.className = 'clickButton';\n      }else{\n        window.sessionStorage.setItem('cardStr',str);\n        event.currentTarget.className = 'clickButton onclick';\n      }\n      that.$router.go(-1);\n    },\n    changeTabbar(type){//顶部卡券切换\n      switch(type){\n        case 4:\n          this.Tabbar.card = false;\n          this.Tabbar.used = false;\n          this.Tabbar.expired = false;\n          this.Tabbar.available = true;\n          this.Tabbar.noAvailable = false;\n          this.ajaxCanuse(1);\n          break;\n        case 5:\n          this.Tabbar.card = false;\n          this.Tabbar.used = false;\n          this.Tabbar.expired = false;\n          this.Tabbar.available = false;\n          this.Tabbar.noAvailable = true;\n          this.ajaxCanuse(2);\n          break;\n      }\n    },\n    ajaxCanuse(type){//订单可用不可用卡券请求\n      let that =this;\n      if(window.sessionStorage.getItem('cardData')){\n        let str = window.sessionStorage.getItem('cardData');\n        let arr = str.split('&&');\n        if(that.cardDate.length <= 0){\n          for(let i in arr){\n            let obj = JSON.parse(arr[i]);\n            that.cardDate.push(obj);\n          }\n        }\n        let data = {\n          reqList:that.cardDate,\n          status:type\n        };\n        let urlStr = util.getpost(data);\n        axios({\n          method:\"post\",\n          url:\"/customer/availableCard\"+urlStr,\n          dataType: 'json',\n          data:data,\n        }).then(response => {\n          if(response.data.status == 0){\n            if(response.data.body.length > 0){\n              that.isShow = true;\n              if(type == 1){//可用\n                that.cards = [];\n                that.cards = response.data.body;\n                that.canNumber = response.data.body.length;\n              }else{\n                that.nocards = [];\n                that.nocards = response.data.body;\n                that.nocannumber = response.data.body.length;\n              }\n            }else{\n              that.isShow =false;\n            }\n          }else{\n            that.isShow =false;\n            if(response.data.status == 499){\n              that.$router.push({name:'signInPage',query:{outLogin:'/'}});\n            }else{\n              MessageBox('系统提示',response.data.message);\n            }\n          }\n        }).catch(oData => {\n          MessageBox('系统提示',oData.data.message);\n        })\n      }\n    }\n  },\n  created(){\n    util.toTop();\n    util.setTitle('使用优惠券');\n    this.Tabbar.available=true;\n    this.ajaxCanuse(1);\n    this.ajaxCanuse(2);\n    window.sessionStorage.setItem('cardStr','无');//可用券为空\n    if(window.innerWidth <= 320){\n      this.widthType = 'height12';\n    }else if(window.innerWidth >=414){\n      this.widthType = 'height15';\n    }\n    let viewStr = util.webview();\n    if(viewStr == 'other'){\n      this.$store.commit('titleShowFunc',true);\n    }else{\n      this.$store.commit('titleShowFunc',false);\n    }\n  },\n};  \n</script>  \n  \n<style lang=\"less\" scoped>   \n  @import '../../assets/less/order_card.less';\n</style> \n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/shoppingCart/order_card.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order_card\"},[(_vm.$store.state.titleShow)?_c('headers',{attrs:{\"headerType\":2,\"headerStr\":'使用优惠券'}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"title\",style:(_vm.$store.state.titleShow?'margin-top:.4rem':'')},[_c('ul',[_c('li',{class:_vm.Tabbar.available?'active':'',staticStyle:{\"width\":\"49%\"},on:{\"click\":function($event){$event.stopPropagation();_vm.changeTabbar(4)}}},[_vm._v(\"可用优惠券(\"+_vm._s(_vm.canNumber)+\")\")]),_vm._v(\" \"),_c('li',{class:_vm.Tabbar.noAvailable?'active':'',staticStyle:{\"width\":\"49%\"},on:{\"click\":function($event){$event.stopPropagation();_vm.changeTabbar(5)}}},[_vm._v(\"不可用优惠券(\"+_vm._s(_vm.nocannumber)+\")\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"connet\"},[(_vm.isShow)?_c('div',{staticClass:\"data\"},[(_vm.Tabbar.available)?_c('div',{staticClass:\"available data_div\"},_vm._l((_vm.cards),function(card){return _c('div',{class:_vm.widthType?_vm.widthType+' crad':' crad '},[_c('i',{staticClass:\"clickButton\",on:{\"click\":function($event){$event.stopPropagation();_vm.saveCardData(card,$event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"data_data\"},[_c('p',{staticClass:\"data_data_one\"},[_vm._v(_vm._s(card.cardType == 1?'¥':'')),_c('span',[_vm._v(_vm._s(card.cardVal/100))]),_vm._v(_vm._s(card.cardType == 2?'折':''))]),_vm._v(\" \"),_c('p',{staticClass:\"data_data_two\"},[_c('span',[_vm._v(_vm._s(card.name))]),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s((card.minUsePrice/100)>0?'满'+card.minUsePrice/100+'元可用':'无门槛使用')}})])]),_vm._v(\" \"),_c('div',{staticClass:\"data_time\"},[_c('span',{staticClass:\"data_time_one\"},[_vm._v(\"有效期：\"+_vm._s(card.startTime)+\"-\"+_vm._s(card.endTime))])])])})):_vm._e(),_vm._v(\" \"),(_vm.Tabbar.noAvailable)?_c('div',{staticClass:\"noAvailable data_div\"},_vm._l((_vm.nocards),function(card){return _c('div',{class:_vm.widthType?_vm.widthType+' crad noAvailable':' crad noAvailable'},[_c('div',{staticClass:\"data_data\"},[_c('p',{staticClass:\"data_data_one\"},[_vm._v(_vm._s(card.cardType == 1?'¥':'')),_c('span',[_vm._v(_vm._s(card.cardVal/100))]),_vm._v(_vm._s(card.cardType == 2?'折':''))]),_vm._v(\" \"),_c('p',{staticClass:\"data_data_two\"},[_c('span',[_vm._v(_vm._s(card.name))]),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s((card.minUsePrice/100)>0?'满'+card.minUsePrice/100+'元可用':'无门槛使用')}})])]),_vm._v(\" \"),_c('div',{staticClass:\"data_time\"},[_c('p',{staticClass:\"data_time_oneP\"},[_c('span',[_vm._v(\"有效期：\"+_vm._s(card.startTime)+\"-\"+_vm._s(card.endTime))])]),_vm._v(\" \"),_vm._m(0,true)])])})):_vm._e()]):_vm._e(),_vm._v(\" \"),(!_vm.isShow)?_c('div',{staticClass:\"nodata\"},[_c('img',{attrs:{\"src\":require(\"../../assets/images/shopCart/card_empty@2x.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('br'),_vm._v(\"\\n      暂无优惠券\\n    \")]):_vm._e()])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"data_time_twoP\"},[_c('span',[_vm._v(\"不可用原因：所结算商品中没有符合条件的商品\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e162fbc4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/shoppingCart/order_card.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e162fbc4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./order_card.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order_card.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order_card.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e162fbc4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./order_card.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e162fbc4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/shoppingCart/order_card.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}